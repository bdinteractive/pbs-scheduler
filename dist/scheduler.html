<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>PBS Scheduler Experience</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1" name="viewport" />

    <!-- BEGIN MANDATORY STYLES -->
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700&subset=all" rel="stylesheet" type="text/css" />
    <link href="https://fonts.googleapis.com/css?family=Arvo" rel="stylesheet">
    <link href="fonts/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <link href="fonts/socicon/socicon.css" rel="stylesheet" type="text/css" />
    <link href="pbs-site-experience.css" rel="stylesheet" type="text/css" />

  </head>

  <body class="page-container-bg-solid page-header-menu-fixed">

    <div class="page-wrapper">

      <!-- /start - PBS Header Logo and Page Title -->
      <div class="page-wrapper-row">
        <div class="page-wrapper-top">
          <div class="page-header">
            <div class="page-header-menu">
              <div class="container">
                <a href="/" class="pbs-logo"></a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- /end - PBS Header Logo and Page Title -->

      <div class="page-wrapper-row full-height">

        <div class="page-wrapper-middle">
          <div class="page-container">
            <div class="page-content-wrapper">

              <!-- /start - PBS Search Form -->
              <div class="page-head pbs-section pbs-section--evening">
                <div class="container">
                  <div class="row">
                    <form class="form-horizontal pbs-search-form">
                      <div class="form-group form-group-lg">
                        <h1 class="pbs-page-head__title">Daily Schedules and Listings</h1>
                        
                        <div class="col-md-3">
                          <h5 class="pbs-search-form__label">Set:</h5>
                          <input type="text" class="form-control pbs-search-form__input" placeholder="">
                        </div>

                        <div class="col-md-3">
                          <h5 class="pbs-search-form__label">&nbsp;</h5>
                          <select class="form-control input-lg pbs-search-form__input">
                            <option>Day Part</option>
                            <option>Primetime</option>
                            <option>Morning</option>
                            <option>Daytime</option>
                            <option>Overnight</option>
                          </select>
                        </div>

                        <div class="col-md-3">
                          <h5 class="pbs-search-form__label">&nbsp;</h5>
                          <select class="form-control input-lg pbs-search-form__input">
                            <option>Feed</option>
                            <option>HD01</option>
                            <option>HD02</option>
                            <option>HD03</option>
                            <option>HD04</option>
                            <option>HD05</option>
                            <option>HD06</option>
                            <option>SD06</option>
                            <option>SD07</option>
                            <option>slX</option>
                          </select>
                        </div>

                        <div class="col-md-3">
                          <h5 class="pbs-search-form__label">&nbsp;</h5>
                          <select id="form-type-dropdown" class="form-control input-lg pbs-search-form__input">
                            <option value="scheduler">Schedule</option>
                            <option value="scheduler">Traffic</option>
                            <option value="documents">Broadcast Schedule Listings</option>
                          </select>
                        </div>

                        <div class="col-md-12">
                          <div class="input-group input-group-lg" style="text-align:center;">
                            <span class="input-group-btn">
                              <button type="search" id="pbs-button-apply" class="btn blue pbs-search-form__button">Apply</button>
                            </span>
                          </div>
                        </div>

                      </div>
                    </form>
                  </div><!-- end - row -->
                </div><!-- end - container -->
              </div><!-- end - page-head -->
              <!-- /end - PBS Search Form -->



              <div class="page-content">
                <div class="container pbs-section">
                  <div class="page-content-inner">

                    <!-- /start - PBS Switch -->
                    <div id="pbs-switch" class="row">
                      <div class="col-md-12">
                        <div class="pbs-switch">
                          <span class="pbs-switch__switcher"></span>
                          <span class="pbs-switch__button pbs-switch__button--knockout">Support</span>
                          <span class="pbs-switch__button">Broadcast</span>
                        </div>
                      </div>
                    </div>
                    <!-- /end - PBS Switch -->

                    <div id="scheduler" class="pbs-scheduler"></div>

                    <div class="pbs-documents">
                      <div class="row">
                        <div class="col-md-3">
                          <h4 class="pbs-documents__title">Filter to:</h4>
                          <button class="pbs-scheduler-button">Long Lead Previews</button>
                          <button class="pbs-scheduler-button">Week by Weeks</button>
                          <button class="pbs-scheduler-button">Logs</button>
                          <button class="pbs-scheduler-button">Cove</button>
                          <button class="pbs-scheduler-button">Embedded Promos</button>
                          <button class="pbs-scheduler-button">Passport</button>
                        </div>
                        <div class="col-md-9">
                          <table class="table table-hover">
                            <thead>
                              <tr>
                                <th>1-15 of 125 entries</th>
                                <th>Date Updated</th>
                              </tr>
                            </thead>
                            <tbody id="documents">
                              
                            </tbody>
                          </table>
                          <nav>
                            <ul class="pagination">
                              <li>
                                <a href="#">
                                  <span aria-hidden="true">&laquo;</span>
                                </a>
                              </li>
                              <li class="active"><a href="#">1</a></li>
                              <li><a href="#">2</a></li>
                              <li><a href="#">3</a></li>
                              <li><a href="#">4</a></li>
                              <li><a href="#">5</a></li>
                              <li>
                                <a href="#">
                                  <span aria-hidden="true">&raquo;</span>
                                </a>
                              </li>
                            </ul>
                          </nav>
                        </div>
                      </div>
                    </div>


                  </div><!-- /end - page-content-inner -->
                </div><!-- /end - pbs-section -->
              </div><!-- end - page-content -->
            </div><!-- end - page-content-wrapper -->
          </div><!-- end - page-container -->
        </div><!-- end - page-wrapper-middle -->

      </div><!-- /end - page-wrapper-row -->
    </div><!-- /end - page-wrapper -->

    <script src="pbs-app-scheduler.js" type="text/javascript"></script>

    <script>

      var PBS_SCHEDULER_STORE = {};
      PBS_SCHEDULER_STORE.SWITCH_TYPE = "support";

      $(document).ready(function() {
        console.log("PBS Scheduler App JS Loading...");
        // Loads data on load of the page
        loadSupport();

        $("#pbs-button-apply").on("click", function(e){
          e.preventDefault();
          console.log($("#form-type-dropdown").val());
          var value = $("#form-type-dropdown").val();
          if(value === "documents"){
            $("#pbs-switch").hide();
            $("#scheduler").hide();
            $(".pbs-documents").show();
            loadDocuments();
          }
          if(value === "scheduler"){
            $("#pbs-switch").show();
            $("#scheduler").show();
            $(".pbs-documents").hide();
          }
        });
      });

      var loadSupport = function() {
        $.getJSON("api-morning-support.json", function(data) {
          // console.log(data);
          var items = "";
          var hours = "<div class='pbs-scheduler-hours'>";
          $.each(data.response.hours, function(index, value) {
            console.log(value);
            hours += "<div class='pbs-scheduler-hours__hour'>" + value + "</div>";
          });
          hours += "</div>";
          items += hours;
          var days = "";
          $.each(data.response.days, function(index, value) {
            // console.log(value);
            // console.log(value.day);
            days += "<div class='pbs-scheduler-day'>";
            days += "<div class='pbs-scheduler-day__title'>" + value.day + "</div>";
            $.each(value.slots, function(index, value) {
              // console.log(value.time);
              // console.log(value.title);
              // console.log(value.keywords);
              // console.log(value.genre);
              if(value.mins === "15"){
                days += "<div class='pbs-scheduler-day__block pbs-scheduler-day__block--15min'>";
              } else if(value.mins === "30"){
                days += "<div class='pbs-scheduler-day__block pbs-scheduler-day__block--30min'>";
              } else if(value.mins === "45"){
                days += "<div class='pbs-scheduler-day__block pbs-scheduler-day__block--45min'>";
              } else if(value.mins === "60"){
                days += "<div class='pbs-scheduler-day__block pbs-scheduler-day__block--60min'>";
              }
              days += "<div class='pbs-scheduler-day__block__time'>" + value.time + "</div>";
              days += "<div class='pbs-scheduler-day__block__title'>" + value.title + "</div>";
              days += "<div class='pbs-scheduler-day__block__keywords'>Keywords: " + value.keywords + "</div>";
              days += "<div class='pbs-scheduler-day__block__genre'>Genre: " + value.genre + "</div>";
              days += "</div>";
            });
            days += "</div>";
          });
          items += days;
          $("#scheduler").html(items);
        });
      }

      var loadBroadcast = function() {
        $.getJSON("api-morning-broadcast.json", function(data) {
          // console.log(data);
          var items = "";
          var hours = "<div class='pbs-scheduler-hours'>";
          $.each(data.response.hours, function(index, value) {
            console.log(value);
            hours += "<div class='pbs-scheduler-hours__hour'>" + value + "</div>";
          });
          hours += "</div>";
          items += hours;
          var days = "";
          $.each(data.response.days, function(index, value) {
            // console.log(value);
            // console.log(value.day);
            days += "<div class='pbs-scheduler-day'>";
            days += "<div class='pbs-scheduler-day__title'>" + value.day + "</div>";
            $.each(value.slots, function(index, value) {
              // console.log(value.time);
              // console.log(value.title);
              // console.log(value.keywords);
              // console.log(value.genre);
              if(value.mins === "15"){
                days += "<div class='pbs-scheduler-day__block pbs-scheduler-day__block--15min'>";
              } else if(value.mins === "30"){
                days += "<div class='pbs-scheduler-day__block pbs-scheduler-day__block--30min'>";
              } else if(value.mins === "45"){
                days += "<div class='pbs-scheduler-day__block pbs-scheduler-day__block--45min'>";
              } else if(value.mins === "60"){
                days += "<div class='pbs-scheduler-day__block pbs-scheduler-day__block--60min'>";
              }
              days += "<div class='pbs-scheduler-day__block__time'>" + value.time + "</div>";
              days += "<div class='pbs-scheduler-day__block__title'>" + value.title + "</div>";
              days += "<div class='pbs-scheduler-day__block__keywords'>" + value.base + "</div>";
              days += "<div class='pbs-scheduler-day__block__keywords'>Pkg. Revision Reason: " + value.revision + "</div>";
              days += "<div class='pbs-scheduler-day__block__genre'>" + value.other + "</div>";
              days += "</div>";
            });
            days += "</div>";
          });
          items += days;
          $("#scheduler").html(items);
        });
      }

      var loadDocuments = function() {
        $.getJSON("api-documents.json", function(data) {
          // console.log(data);
          var items = "";
          $.each(data.response.documents, function(index, value) {
            console.log(value);
            items += "<tr>";
            items += "<td>" + value.title + "</td>";
            items += "<td>" + value.date + "</td>";
            items += "</tr>";
          });
          $("#documents").html(items);
        });
      }

      $('.pbs-switch').on("click", function(){
        $(this).toggleClass('pbs-switch--isSwitched');
        console.log(PBS_SCHEDULER_STORE.SWITCH_TYPE);
        if(PBS_SCHEDULER_STORE.SWITCH_TYPE === "support") {
          $("#scheduler").html("<h3>Loading Data for Broadcast</h3>");
          PBS_SCHEDULER_STORE.SWITCH_TYPE = "broadcast";
          loadBroadcast();
        } else if(PBS_SCHEDULER_STORE.SWITCH_TYPE === "broadcast") {
          $("#scheduler").html("<h3>Loading Data for Support</h3>");
          PBS_SCHEDULER_STORE.SWITCH_TYPE = "support";
          loadSupport();
        }
      });

    </script>

  </body>
</html>